const productVariantOutput=document.getElementById("product-variant-output"),productVariantSelect=document.getElementById("product-variant-select"),triggerChange=e=>{var t=new Event("change");e.dispatchEvent(t)},addElement=e=>{var t=document.createElement("input"),e=(t.setAttribute("type","hidden"),t.setAttribute("id","preorder-note"),t.setAttribute("name","properties[Preorder Note]"),property_preorder.replace(/\[date\]/g,""+e));t.setAttribute("value",e),document.querySelector(".section-product__details__variants").insertBefore(t,productVariantOutput.nextSibling)},removeElement=e=>{e=document.getElementById(e);e&&e.remove()},activateOptions=function(){const g=productVariantOutput.querySelectorAll("li");for(let m of g)m.addEventListener("click",()=>{var e=m.dataset.id,t=m.dataset.title,a=m.dataset.inventory;let o=void 0;null!==m.dataset.date&&(o=m.dataset.date);var r,n=document.getElementById("option-select-label"),l=productVariantSelect.querySelectorAll("option"),d=document.querySelector(".preorder-message"),i=d.querySelector(".date");for(r of l)if(r.value===e){productVariantSelect.value=e;for(const m of productVariantSelect.querySelectorAll("option"))m.value==e&&(m.selected=!0);triggerChange(productVariantSelect),n.textContent=t;var s,c=window.location.protocol+"//"+window.location.host+window.location.pathname+"?variant="+e,c=(window.history.replaceState({path:c},"",c),document.getElementById("toggle-options")),u=document.querySelector(".button--add-to-cart"),p=u.querySelector("span");if("Out of Stock"===a?(p.textContent=label_sold_out,u.disabled=!0,n.classList.add("oos"),d.classList.add("hidden"),removeElement("preorder-note")):"Preorder"===a?(p.textContent=label_preorder,u.disabled=!1,n.classList.remove("oos"),void 0!==o&&(s=message_preorder.replace(/\[date\]/g,""+o),i.textContent=s,d.classList.remove("hidden"),addElement(o))):(p.textContent=label_add_to_cart,u.disabled=!1,n.classList.remove("oos"),d.classList.add("hidden"),removeElement("preorder-note")),c.parentNode.classList.remove("open"),!m.classList.contains("active")){for(var v of g)v.classList.remove("active");m.classList.add("active")}}})},activateToggle=function(){const t=document.getElementById("toggle-options");t&&t.addEventListener("click",e=>{e.preventDefault(),t.parentNode.classList.toggle("open")});var e=document.getElementById("product-variant-output");e&&(e.addEventListener("mouseover",()=>{clearTimeout(window.toggleDelay)}),e.addEventListener("mouseout",()=>{clearTimeout(window.toggleDelay),window.toggleDelay=setTimeout(()=>{t.parentNode.classList.remove("open")},500)}))};if(productVariantSelect){const D=productVariantSelect.querySelectorAll("option");let n=`<div class="option-select"><button id="toggle-options" aria-label="${label_select_size}"><span class="option-select-label" id="option-select-label">${label_select_size}</span></button><div class="option-select__scroll"><ul>`;for(let r of D){let e=r.dataset.title,t=r.dataset.inventory,a=void 0,o=(null!==r.dataset.date&&(a=r.dataset.date),r.value);"Out of Stock"===t?n+=`<li data-id="${o}" data-title="${e}" data-inventory="${t}" aria-label="${e}" class="disabled"><span class="option-title">${e}</span><span>${t}</span></li>`:null!=a?n+=`<li data-id="${o}" data-date="${a}" data-title="${e}" data-inventory="${t}" aria-label="${e}"><span class="option-title">${e}</span><span>${t}</span></li>`:n+=`<li data-id="${o}" data-title="${e}" data-inventory="${t}" aria-label="${e}"><span class="option-title">${e}</span><span>${t}</span></li>`}n+="</ul></div></div>",productVariantOutput.innerHTML=n,activateOptions(),activateToggle()}const getCurrentVariant=function(){var e=window.location.search,t=new URLSearchParams(e).get("variant");if(t){var a,e=productVariantSelect.querySelectorAll("option"),o=document.getElementById("option-select-label"),r=document.querySelector(".preorder-message"),n=r.querySelector(".date");for(a of e)if(a.value===t){var l=a.dataset.inventory,d=document.querySelector(".button--add-to-cart"),i=d.querySelector("span");productVariantSelect.value=t,o.textContent=a.dataset.title;let e=void 0;null!==a.dataset.date&&(e=a.dataset.date),a.selected=!0,"Out of Stock"===l?(i.textContent=label_sold_out,d.disabled=!0,o.classList.add("oos"),r.classList.add("hidden"),removeElement("preorder-note")):"Preorder"===l?(i.textContent=label_preorder,d.disabled=!1,o.classList.remove("oos"),void 0!==e&&(l=message_preorder.replace(/\[date\]/g,""+e),n.textContent=l,r.classList.remove("hidden"),addElement(e))):(i.textContent=label_add_to_cart,d.disabled=!1,o.classList.remove("oos"),r.classList.add("hidden"),removeElement("preorder-note"))}triggerChange(productVariantSelect)}};getCurrentVariant();