const productVariantOutput=document.getElementById("product-variant-output"),productVariantSelect=document.getElementById("product-variant-select"),triggerChange=e=>{var t=new Event("change");e.dispatchEvent(t),document.getElementById("esc-oos-form").removeAttribute("style")},addElement=e=>{var t=document.createElement("input"),e=(t.setAttribute("type","hidden"),t.setAttribute("id","preorder-note"),t.setAttribute("name","properties[Preorder Note]"),property_preorder.replace(/\[date\]/g,""+e));t.setAttribute("value",e),document.querySelector(".section-product__details__variants").insertBefore(t,productVariantOutput.nextSibling)},removeElement=e=>{e=document.getElementById(e);e&&e.remove()},activateOptions=function(){const g=productVariantOutput.querySelectorAll("li");for(let m of g)m.addEventListener("click",()=>{var e=m.dataset.id,t=m.dataset.title,a=m.dataset.inventory;let o=void 0;null!==m.dataset.date&&(o=m.dataset.date);var n,r=document.getElementById("option-select-label"),l=productVariantSelect.querySelectorAll("option"),d=document.querySelector(".preorder-message"),s=d.querySelector(".date");for(n of l)if(n.value===e){productVariantSelect.value=e;for(const m of productVariantSelect.querySelectorAll("option"))m.value==e&&(m.selected=!0);triggerChange(productVariantSelect),r.textContent=t;var i,c=window.location.protocol+"//"+window.location.host+window.location.pathname+"?variant="+e,c=(window.history.replaceState({path:c},"",c),document.getElementById("toggle-options")),u=document.querySelector(".button--add-to-cart"),p=u.querySelector("span");if("Out of Stock"===a?(p.textContent=label_sold_out,u.disabled=!0,r.classList.add("oos"),d.classList.add("hidden"),removeElement("preorder-note")):"Preorder"===a?(p.textContent=label_preorder,u.disabled=!1,r.classList.remove("oos"),void 0!==o&&(i=message_preorder.replace(/\[date\]/g,""+o),s.textContent=i,d.classList.remove("hidden"),addElement(o))):(p.textContent=label_add_to_cart,u.disabled=!1,r.classList.remove("oos"),d.classList.add("hidden"),removeElement("preorder-note")),c.parentNode.classList.remove("open"),!m.classList.contains("active")){for(var v of g)v.classList.remove("active");m.classList.add("active")}}})},activateToggle=function(){const t=document.getElementById("toggle-options");t&&t.addEventListener("click",e=>{e.preventDefault(),t.parentNode.classList.toggle("open")})};if(document.addEventListener("click",e=>{var t=document.getElementById("product-variant-output"),a=document.getElementById("toggle-options");let o=e.target;do{if(o==t)return}while(o=o.parentNode);a.parentNode.classList.remove("open")}),productVariantSelect){const H=productVariantSelect.querySelectorAll("option");let r=`<div class="option-select"><button id="toggle-options" aria-label="${label_select_size}"><span class="option-select-label" id="option-select-label">${label_select_size}</span></button><div class="option-select__scroll"><ul>`;for(let n of H){let e=n.dataset.title,t=n.dataset.inventory,a=void 0,o=(null!==n.dataset.date&&(a=n.dataset.date),n.value);"Out of Stock"===t?r+=`<li data-id="${o}" data-title="${e}" data-inventory="${t}" aria-label="${e}" class="disabled"><span class="option-title">${e}</span><span>${t}</span></li>`:null!=a?r+=`<li data-id="${o}" data-date="${a}" data-title="${e}" data-inventory="${t}" aria-label="${e}"><span class="option-title">${e}</span><span>${t}</span></li>`:r+=`<li data-id="${o}" data-title="${e}" data-inventory="${t}" aria-label="${e}"><span class="option-title">${e}</span><span>${t}</span></li>`}r+="</ul></div></div>",productVariantOutput.innerHTML=r,activateOptions(),activateToggle()}const getCurrentVariant=function(){var e=window.location.search,t=new URLSearchParams(e).get("variant");if(t){var a,e=productVariantSelect.querySelectorAll("option"),o=document.getElementById("option-select-label"),n=document.querySelector(".preorder-message"),r=n.querySelector(".date");for(a of e)if(a.value===t){var l=a.dataset.inventory,d=document.querySelector(".button--add-to-cart"),s=d.querySelector("span");productVariantSelect.value=t,o.textContent=a.dataset.title;let e=void 0;null!==a.dataset.date&&(e=a.dataset.date),a.selected=!0,"Out of Stock"===l?(s.textContent=label_sold_out,d.disabled=!0,o.classList.add("oos"),n.classList.add("hidden"),removeElement("preorder-note")):"Preorder"===l?(s.textContent=label_preorder,d.disabled=!1,o.classList.remove("oos"),void 0!==e&&(l=message_preorder.replace(/\[date\]/g,""+e),r.textContent=l,n.classList.remove("hidden"),addElement(e))):(s.textContent=label_add_to_cart,d.disabled=!1,o.classList.remove("oos"),n.classList.add("hidden"),removeElement("preorder-note"))}triggerChange(productVariantSelect)}else document.getElementById("esc-oos-form").style.display="none"};getCurrentVariant();