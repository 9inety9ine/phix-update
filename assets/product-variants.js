const productVariantOutput=document.getElementById("product-variant-output"),productVariantSelect=document.getElementById("product-variant-select"),triggerChange=t=>{var e=new Event("change");t.dispatchEvent(e)},addElement=t=>{var e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("id","preorder-note"),e.setAttribute("name","properties[Preorder Note]"),e.setAttribute("value","This is a pre-order item to be despatched on "+t+"."),document.querySelector(".section-product__details__variants").insertBefore(e,productVariantOutput.nextSibling)},removeElement=t=>{t=document.getElementById(t);t&&t.remove()},activateOptions=function(){const m=productVariantOutput.querySelectorAll("li");for(let v of m)v.addEventListener("click",()=>{var t=v.dataset.id,e=v.dataset.title,a=v.dataset.inventory;let o=void 0;null!==v.dataset.date&&(o=v.dataset.date);var n,l=document.getElementById("option-select-label"),r=productVariantSelect.querySelectorAll("option"),d=document.querySelector(".preorder-message"),i=d.querySelector(".date");for(n of r)if(n.value===t){productVariantSelect.value=t;for(const v of productVariantSelect.querySelectorAll("option"))v.value==t&&(v.selected=!0);triggerChange(productVariantSelect),l.textContent=e;var s=window.location.protocol+"//"+window.location.host+window.location.pathname+"?variant="+t,s=(window.history.replaceState({path:s},"",s),document.getElementById("toggle-options")),c=document.querySelector(".button--add-to-cart"),u=c.querySelector("span");if(console.log(a),"Out of Stock"===a?(u.textContent=label_sold_out,c.disabled=!0,l.classList.add("oos"),d.classList.add("hidden"),removeElement("preorder-note")):"Preorder"===a?(u.textContent=label_preorder,c.disabled=!1,l.classList.remove("oos"),void 0!==o&&(i.textContent=o,d.classList.remove("hidden"),addElement(o))):(u.textContent=label_add_to_cart,c.disabled=!1,l.classList.remove("oos"),d.classList.add("hidden"),removeElement("preorder-note")),s.parentNode.classList.remove("open"),!v.classList.contains("active")){for(var p of m)p.classList.remove("active");v.classList.add("active")}}})},activateToggle=function(){const e=document.getElementById("toggle-options");e&&e.addEventListener("click",t=>{t.preventDefault(),e.parentNode.classList.toggle("open")});var t=document.getElementById("product-variant-output");t&&(t.addEventListener("mouseover",()=>{clearTimeout(window.toggleDelay)}),t.addEventListener("mouseout",()=>{clearTimeout(window.toggleDelay),window.toggleDelay=setTimeout(()=>{e.parentNode.classList.remove("open")},500)}))};if(productVariantSelect){const B=productVariantSelect.querySelectorAll("option");let l=`<div class="option-select"><button id="toggle-options" aria-label="${label_select_size}"><span class="option-select-label" id="option-select-label">${label_select_size}</span></button><div class="option-select__scroll"><ul>`;for(let n of B){let t=n.dataset.title,e=n.dataset.inventory,a=void 0,o=(null!==n.dataset.date&&(a=n.dataset.date),n.value);"Out of Stock"===e?l+=`<li data-id="${o}" data-title="${t}" data-inventory="${e}" aria-label="${t}" class="disabled"><span class="option-title">${t}</span><span>${e}</span></li>`:null!=a?l+=`<li data-id="${o}" data-date="${a}" data-title="${t}" data-inventory="${e}" aria-label="${t}"><span class="option-title">${t}</span><span>${e}</span></li>`:l+=`<li data-id="${o}" data-title="${t}" data-inventory="${e}" aria-label="${t}"><span class="option-title">${t}</span><span>${e}</span></li>`}l+="</ul></div></div>",productVariantOutput.innerHTML=l,activateOptions(),activateToggle()}const getCurrentVariant=function(){var t=window.location.search,e=new URLSearchParams(t).get("variant");if(e){var a,t=productVariantSelect.querySelectorAll("option"),o=document.getElementById("option-select-label"),n=document.querySelector(".preorder-message"),l=n.querySelector(".date");for(a of t)if(a.value===e){var r=a.dataset.inventory,d=document.querySelector(".button--add-to-cart"),i=d.querySelector("span");productVariantSelect.value=e,o.textContent=a.dataset.title;let t=void 0;null!==a.dataset.date&&(t=a.dataset.date),a.selected=!0,"Out of Stock"===r?(i.textContent=label_sold_out,d.disabled=!0,o.classList.add("oos"),n.classList.add("hidden")):"Preorder"===r?(i.textContent=label_preorder,d.disabled=!1,o.classList.remove("oos"),void 0!==t&&(l.textContent=t,n.classList.remove("hidden"))):(i.textContent=label_add_to_cart,d.disabled=!1,o.classList.remove("oos"),n.classList.add("hidden"))}triggerChange(productVariantSelect)}};getCurrentVariant();