const initRecentSlider=()=>{new Swiper(".swiper-recent",{loop:!1,spaceBetween:12,slidesPerView:2,allowTouchMove:!0,navigation:{nextEl:".recent-nav--next",prevEl:".recent-nav--prev"},breakpoints:{768:{slidesPerView:4,spaceBetween:12},1024:{slidesPerView:6,spaceBetween:12},1440:{slidesPerView:6,spaceBetween:12}}})},getLocalItems=e=>{const t=[];e=JSON.parse(localStorage.getItem(e));return null!==e&&e.forEach(e=>{t.push(e)}),t},addToLocalItems=(e,t,r)=>{var c=getLocalItems(e);if(!(null!==c||0<c.length)||!c.includes(t)){for(c.push(t);c.length>r;)c.splice(0,1);localStorage.setItem(e,JSON.stringify(c))}},removeFromLocalItems=(e,t)=>{var r=getLocalItems(e),t=r.indexOf(t);r.splice(t,1),localStorage.setItem(e,JSON.stringify(r))},recentProductsToShow=getLocalItems("recent_phix_products"),getRecentProductCards=async()=>{let e="";for(var t of Array.from(recentProductsToShow).reverse()){var r=await fetch(window.Shopify.routes.root+"products/"+t+"?view=product-card-small");404==r.status?removeFromLocalItems("recent_phix_products",t):0<(t=await r.text()).indexOf("\x3c!--[product-card]--\x3e")&&(r=t.split("\x3c!--[product-card]--\x3e").pop().split("\x3c!--[/product-card]--\x3e")[0],e+=`<div class="swiper-slide">${r}</div>`)}return e},clearRecentButton=(window.addEventListener("DOMContentLoaded",()=>{const r=document.querySelector(".recent-products");if(r){r.innerHTML="";let t=!1;getRecentProductCards().then(e=>{0==e.length?document.querySelector(".section-recently-viewed").classList.add("hidden"):(r.innerHTML=e,t=!0)}).then(()=>{initRecentSlider(),window.initializeImageLoad()}).finally(()=>{t&&document.querySelector(".section-recently-viewed").classList.remove("hidden"),addToLocalItems("recent_phix_products",localProductHandle,12)})}}),document.querySelector(".clear-recent")),recentElement=document.querySelector(".section-recently-viewed");clearRecentButton&&recentElement&&clearRecentButton.addEventListener("click",e=>{e.preventDefault(),localStorage.removeItem("recent_phix_products"),recentElement.style.display="none"});